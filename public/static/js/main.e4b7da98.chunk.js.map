{"version":3,"sources":["contexts/CurrentUserContext.js","images/header-logo.svg","components/Header.js","components/Card.js","components/Main.js","images/profile__avatar-edit-button.png","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","components/Footer.js","utils/Api.js","components/App.js","reportWebVitals.js","index.js"],"names":["CurrentUserContext","React","createContext","Header","className","src","headLogo","alt","Card","props","сurrentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","type","onClick","onCardDelete","link","name","onCardClick","onCardLike","length","Main","cards","onEditAvatar","onEditProfile","onAddPlace","handleCardClick","currentUser","avatar","about","map","card","PopupWithForm","onSubmit","nameForm","isOpen","onClose","title","children","id","idButton","buttonText","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","e","preventDefault","value","onChange","target","required","minLength","maxLength","EditAvatarPopup","onUpdateAvatar","refAvatar","useRef","current","ref","placeholder","AddPlacePopup","refCardName","refCardLink","ImagePopup","selectedCard","Footer","api","baseUrl","headers","this","_baseUrl","_headers","res","ok","json","Promise","reject","status","fetch","method","then","_checkStatus","userInfo","console","log","body","JSON","stringify","editName","editInfo","data","cardId","isLike","itemId","authorization","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","setSelectedCard","setCards","setCurrentUser","all","getInitialCards","getUserInfo","catch","err","closeAllPopups","Provider","addLikeDislikeCard","newCard","newCards","item","error","deleteCard","filter","currentCard","patchNewAvatar","setUserInfo","addNewCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e4b7da98.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","export default __webpack_public_path__ + \"static/media/header-logo.c2821b38.svg\";","import headLogo from \"../images/header-logo.svg\";\r\nimport React from 'react';\r\n\r\nfunction Header() {\r\n    return (\r\n        <header className =\"header\">\r\n            <img className = \"header__logo\" src={headLogo} alt=\"Логотип два слова. Место.Россия. В белом исполнении.\" />\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n\r\n    const сurrentUser = React.useContext(CurrentUserContext);\r\n    const isOwn = props.owner._id === сurrentUser._id;   \r\n    const cardDeleteButtonClassName = (\r\n        `element__delete-button ${isOwn ? 'element__delete-button_owner' : ''}`\r\n      );\r\n    \r\n    const isLiked = props.likes.some(i => i._id  === сurrentUser._id);\r\n    const cardLikeButtonClassName = (\r\n        `element__like-button ${isLiked ? 'element__like-button_active' : ''}`\r\n    ); \r\n    \r\n    function handleClick() {\r\n        props.onCardClick({link:props.link, name:props.name, alt:props.name});\r\n      }\r\n\r\n    function handleLikeClick(){\r\n        //console.log(isLiked);\r\n        props.onCardLike(props);\r\n    }  \r\n\r\n    function handleDeleteClick() {\r\n        props.onCardDelete(props);\r\n    }\r\n\r\n\r\n    return(\r\n        <li className=\"element\">\r\n            <article> \r\n                <button \r\n                    type=\"button\" \r\n                    className={cardDeleteButtonClassName}\r\n                    onClick={handleDeleteClick}\r\n                ></button>\r\n                <img className=\"element__image\"  \r\n                    src={props.link} \r\n                    alt={props.name} \r\n                    onClick={handleClick} \r\n                />\r\n                <div className=\"element__items\">\r\n                    <h2 className=\"element__title\">{props.name}</h2>\r\n                    <div className=\"element__likes-box\"> \r\n                        <button \r\n                            type=\"button\" \r\n                            className={cardLikeButtonClassName}\r\n                            onClick={handleLikeClick}\r\n                            ></button>\r\n                        <span className=\"element__count-likes\">{props.likes.length}</span>\r\n                    </div>\r\n                </div>\r\n            </article>\r\n        </li>\r\n    );\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\nimport editButton from '../images/profile__avatar-edit-button.png';\r\nimport Card from '../components/Card';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Main({cards, onEditAvatar,onEditProfile, onAddPlace, onCardLike, onCardDelete, handleCardClick}) {\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    //console.log(cards);\r\n\r\n    return(\r\n        <main className=\"content\">\r\n        <section className=\"profile\">\r\n            <div className =\"profile__card\">\r\n                <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Исследователь океана Жак Ив Кусто\" />\r\n                <img onClick={onEditAvatar} className=\"profile__avatar-edit-button\" src={editButton} alt=\"Кнопка редактирования фотографии профиля\" />\r\n                <div className=\"profile__info\">\r\n                    <div className=\"profile__title-button\">\r\n                        <h1 className=\"profile__info-title\">{currentUser.name}</h1>\r\n                        <button type=\"button\" onClick={onEditProfile} className=\"profile__edit-button\" ></button>\r\n                    </div>\r\n                    <p className=\"profile__info-subtitle\">{currentUser.about}</p>\r\n                </div>\r\n            </div>\r\n            <button type=\"button\" onClick={onAddPlace} className=\"profile__add-button\"></button>\r\n        </section>\r\n        <section className = \"gridImages\">\r\n            <ul className=\"elements\">\r\n                {cards && cards.map((card) => \r\n                    (<Card  key={card._id} \r\n                            {...card}\r\n                            onCardClick={handleCardClick} \r\n                            onCardLike={(card) => onCardLike(card)}\r\n                            onCardDelete={(card) => onCardDelete(card)}                            \r\n                            />))}\r\n            </ul>\r\n        </section>\r\n    </main>\r\n    );\r\n}\r\n\r\nexport default Main;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB9SURBVHgB7dbBCYAwDAXQ4ASO4CiO4AgdwQ10BDfqKBklpjRCKIiXfLzkQyi95PHppUSAiMiiU9tJqBjC0sMQbEAEgr0gTypF5AOJaZRIIokkksifiEEFjjjsRDY5/DKHxTaxhTxgezSyQt/CMuls7j7rFEJE+kfvas0ImBsR7skYWCY75QAAAABJRU5ErkJggg==\"","import React from 'react';\r\n\r\nfunction PopupWithForm(props){\r\n    //console.log(props);\r\n    return(\r\n        <div onSubmit={props.onSubmit} className={`modal modal_type_${props.nameForm} ${props.isOpen ? 'modal_open' : ''}`}>\r\n        <div className=\"modal__container\">\r\n            <button className=\"modal__close-button\" onClick={props.onClose}></button>\r\n            <h2 className=\"modal__title\">{props.title}</h2>\r\n            <form className=\"modal__edit-form\">\r\n                {props.children}\r\n                <button id={props.idButton} className=\"modal__save-button\" type=\"submit\" >{props.buttonText}</button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}){\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const [name, setName] = React.useState(currentUser.name);\r\n    const [description, setDescription] = React.useState(currentUser.about);\r\n \r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n      }, [currentUser]);\r\n\r\n    function handleChangeName(e) {\r\n        setName(e.target.value);\r\n      }\r\n\r\n    function handleChangeAbout(e) {\r\n        setDescription(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onUpdateUser({\r\n          name,\r\n          about: description,\r\n        });\r\n      } \r\n    \r\n    return(\r\n        <PopupWithForm \r\n        nameForm={'edit-form'}\r\n        name={'newProfile'}\r\n        title={'Редактировать профиль' }\r\n        idButton={'saveEditForm' }\r\n        isOpen={isOpen} \r\n        onClose={onClose} \r\n        buttonText={'Сохранить'}\r\n        onSubmit={handleSubmit}\r\n        children={(\r\n        <>\r\n        <input \r\n            type=\"text\"\r\n            name=\"input-name\"\r\n            value={name}\r\n            onChange={handleChangeName}\r\n            className=\"modal__input modal__input_type_name\"\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"40\" />\r\n        <span className=\"modal__error\" id=\"input-name-error\"></span>\r\n        <input\r\n            type=\"text\"\r\n            name= \"input-profession\"\r\n            value={description}\r\n            onChange={handleChangeAbout}\r\n            className=\"modal__input modal__input_type_about-myself\"\r\n            required \r\n            minLength=\"2\"\r\n            maxLength=\"200\" />\r\n        <span className=\"modal__error\" id=\"input-profession-error\"></span>\r\n        </>\r\n        )}\r\n    />\r\n    );\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}){\r\n    const refAvatar = React.useRef();\r\n\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onUpdateAvatar({\r\n          avatar: refAvatar.current.value,\r\n        });\r\n      } \r\n\r\n    return(\r\n        <PopupWithForm\r\n        onSubmit={handleSubmit}\r\n        name='edit-avatar'\r\n        title='Обновить аватар'\r\n        idButton='loadAvatar' \r\n        isOpen={isOpen} \r\n        onClose={onClose} \r\n        buttonText='Сохранить'\r\n        >\r\n            <input\r\n                type=\"url\"\r\n                name= \"input-avatar\"\r\n                ref={refAvatar}\r\n                className=\"modal__input modal__input_type_link\"\r\n                placeholder=\"Ссылка на картинку\"\r\n                required \r\n            />\r\n            <span className=\"modal__error\" id=\"input-avatar-error\"></span>\r\n            </PopupWithForm>\r\n    );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\n\r\nfunction AddPlacePopup({isOpen, onClose, onAddPlace}){\r\n    const refCardName = React.useRef();\r\n    const refCardLink = React.useRef();\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        onAddPlace({ \r\n            name: refCardName.current.value,\r\n            link: refCardLink.current.value\r\n        });\r\n    }\r\n\r\n    return(\r\n        <PopupWithForm \r\n        name='add-card' \r\n        title='Новое место' \r\n        idButton='saveButtonAddCard' \r\n        onSubmit={handleSubmit}\r\n        isOpen={isOpen} \r\n        onClose={onClose}\r\n        buttonText='Добавить'\r\n    >\r\n        <input\r\n            type=\"text\"\r\n            name=\"input-tittle\"\r\n            ref={refCardName}\r\n            className=\"modal__input modal__input_type_title\"\r\n            placeholder=\"Название\"\r\n            required\r\n            minLength=\"1\"\r\n            maxLength=\"30\" />\r\n        <span className=\"modal__error\" id=\"input-tittle-error\"></span>\r\n        <input\r\n            type=\"url\"\r\n            name= \"input-link\"\r\n            ref={refCardLink}\r\n            className=\"modal__input modal__input_type_link\"\r\n            placeholder=\"Ссылка на картинку\"\r\n            required />\r\n        <span className=\"modal__error\" id=\"input-link-error\"></span>\r\n    </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\n\r\nfunction ImagePopup({onClose, selectedCard}){\r\n    \r\n\r\n    return(\r\n        <div className={`modal modal_type_img-big  ${selectedCard !== null ? 'modal_open' : ''}`} >\r\n            <div className=\"modal__window-container\">\r\n                <button type=\"button\" className=\"modal__close-button\" onClick={onClose} ></button>\r\n                <img className=\"modal__image\" src={selectedCard !== null ? selectedCard.link : '#'} alt={selectedCard != null ? selectedCard.name : ''}/>\r\n                <h2 className=\"modal__description\" >{selectedCard !== null ? selectedCard.name : ''}</h2>\r\n            </div> \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\n\r\nfunction Footer() {\r\n    return (\r\n        <footer className=\"footer\">\r\n            <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n        </footer>\r\n    );\r\n}\r\n\r\nexport default Footer;","class Api{\r\n    constructor({baseUrl, headers}){\r\n        this._baseUrl = baseUrl;\r\n        this._headers = headers;\r\n    }\r\n\r\n    _checkStatus(res) {\r\n        if (res.ok) {\r\n            return res.json();\r\n        } else {\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        }\r\n    }\r\n\r\n    getInitialCards() {\r\n        return fetch(`${this._baseUrl}/cards`, {\r\n            method: 'GET',\r\n            headers: this._headers\r\n        })\r\n            .then(this._checkStatus)\r\n    }\r\n    \r\n    getUserInfo() {\r\n        return fetch(\r\n            `${this._baseUrl}/users/me`, {\r\n            method: 'GET',\r\n            headers: this._headers\r\n        })\r\n        .then(this._checkStatus)\r\n    }\r\n\r\n    setUserInfo(userInfo) {\r\n        console.log(userInfo)\r\n        return fetch(`${this._baseUrl}/users/me`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify(userInfo)\r\n        }\r\n        )\r\n        .then(this._checkStatus)\r\n    }\r\n\r\n    editUserInfo(editName, editInfo){\r\n        return fetch(\r\n            `${this._baseUrl}/users/me`,\r\n            {\r\n                method: 'PATCH',\r\n                headers: this._headers,\r\n                body: JSON.stringify({\r\n                    name: editName,\r\n                    about: editInfo\r\n                })\r\n            }\r\n        )\r\n            .then(this._checkStatus)    \r\n    }\r\n\r\n    addNewCard(data){\r\n        return fetch(\r\n            `${this._baseUrl}/cards`, {\r\n            method: 'POST',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: data.name,\r\n                link: data.link\r\n            })\r\n        })\r\n        .then(this._checkStatus)\r\n    }\r\n\r\n    addLikeDislikeCard(cardId, isLike) {\r\n        return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n            method:  isLike ? 'PUT' : 'DELETE',\r\n            headers: this._headers\r\n        })\r\n            .then(this._checkStatus);\r\n    }\r\n\r\n    patchNewAvatar(link) {\r\n        return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n                method: 'PATCH',\r\n                headers: this._headers,\r\n                body: JSON.stringify(link)\r\n        })\r\n            .then(this._checkStatus);\r\n    }\r\n\r\n    deleteCard(itemId) {\r\n        return fetch(`${this._baseUrl}/cards/${itemId}`, {\r\n            method: 'DELETE',\r\n            headers: this._headers,\r\n        })\r\n            .then(this._checkStatus);\r\n    }\r\n}\r\n\r\nconst api = new Api({\r\n    baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-16\",\r\n    headers: {\r\n      authorization: \"94eaa851-634c-434c-a23c-4aeaaa34181d\",\r\n      'Content-Type': 'application/json'\r\n    },\r\n  });\r\n\r\nexport default api;","import React from 'react';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\nimport Header from './Header';\nimport Main from './Main';\nimport PopupWithForm from './PopupWithForm';\nimport EditProfilePopup from './EditProfilePopup'\nimport EditAvatarPopup from './EditAvatarPopup'\nimport AddPlacePopup from './AddPlacePopup'\nimport ImagePopup from './ImagePopup';\nimport Footer from './Footer';\nimport '../index.css';\nimport api from '../utils/Api';\n\n\n\nfunction App() {\n\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n    const [selectedCard, setSelectedCard] = React.useState(null);\n    const [cards, setCards] = React.useState([]);\n\n    const [currentUser, setCurrentUser] = React.useState({name:'', about:'', avatar:''});\n    \n\n\n\n    const handleEditAvatarClick = () => {\n        setIsEditAvatarPopupOpen(true);\n    };\n    const handleEditProfileClick = () => {\n        setIsEditProfilePopupOpen(true);\n    };\n    const handleAddPlaceClick = () => {\n        setIsAddPlacePopupOpen(true);\n    };\n\n    const handleCardClick = (card) => {\n        setSelectedCard(card);\n    }\n\n    React.useEffect(()=>{\n        Promise.all([api.getInitialCards(), api.getUserInfo()])  \n        .then(([cards, res]) => {\n            setCards(cards);\n            setCurrentUser(res);\n        })\n        .catch((err) => console.log(err));\n    },[]);\n\n    function handleUpdateUser(data){\n        api.setUserInfo(data)\n        .then((res) => {\n            setCurrentUser(res);\n            closeAllPopups();\n        })\n        .catch((error) => console.log('Ошибка при редактировании данных пользователя', error));\n    }\n\n    function handleUpdateAvatar(link){\n        api.patchNewAvatar(link)\n        .then((link)=>{\n            setCurrentUser(link);\n            closeAllPopups();\n        })\n        .catch((error) => console.log(error));\n    }\n\n    function handleAddPlaceSubmit(data){\n        api.addNewCard(data)\n          .then((newCard) => {\n            setCards([newCard, ...cards]);\n            closeAllPopups();\n          });\n      }\n\n    function handleCardLike(card){\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\n        api.addLikeDislikeCard(card._id, !isLiked)\n          .then((newCard) => {\n              console.log(newCard)\n            const newCards = cards.map((item) => item._id === card._id ? newCard : item);\n            setCards(newCards);\n          })\n          .catch((error) => console.log(error));\n      }\n\n\n    function handleDeleteCard(card){\n        api.deleteCard(card._id)\n        .then(()=>{\n            const newCards = cards.filter((currentCard)=> currentCard._id !== card._id);\n            setCards(newCards);\n            closeAllPopups();\n        })\n        .catch((error) => console.log(error));\n    }\n\n    const closeAllPopups = () =>{\n        setIsEditAvatarPopupOpen(false);\n        setIsEditProfilePopupOpen(false);\n        setIsAddPlacePopupOpen(false);\n    \n        setSelectedCard(null);\n    }\n\nreturn (\n    <CurrentUserContext.Provider value={currentUser} >\n        <Header />   \n            <Main \n                onEditProfile={handleEditProfileClick}\n                onAddPlace={handleAddPlaceClick}\n                onEditAvatar={handleEditAvatarClick}\n\n                handleCardClick={handleCardClick}\n                onCardLike={handleCardLike}\n                onCardDelete={handleDeleteCard}\n                \n                cards={cards}\n                setCards={setCards}\n                onClose={closeAllPopups}\n        />\n        <Footer />\n\n    <PopupWithForm \n        name='confirm' \n        title='Вы уверены?' \n        idButton='delete' \n        buttonText='Сохранить'\n    />\n    \n    <EditAvatarPopup \n        isOpen={isEditAvatarPopupOpen}\n        onClose={closeAllPopups} \n        onUpdateAvatar={handleUpdateAvatar}\n    /> \n    \n    <EditProfilePopup \n        isOpen={isEditProfilePopupOpen} \n        onClose={closeAllPopups}\n        onUpdateUser={handleUpdateUser} \n    /> \n\n    <AddPlacePopup\n        isOpen={isAddPlacePopupOpen} \n        onClose={closeAllPopups}\n        onAddPlace={handleAddPlaceSubmit}\n    />\n\n    <ImagePopup \n        onClose={closeAllPopups}\n        selectedCard={selectedCard}\n    />   \n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}